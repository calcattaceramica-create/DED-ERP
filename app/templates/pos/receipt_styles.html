{# Template Styles Based on Company Settings #}
{% set template = company.invoice_template if company and company.invoice_template else 'modern' %}

{# Modern Template - Default #}
{% if template == 'modern' %}
<style>
    :root {
        --primary-color: #667eea;
        --primary-dark: #764ba2;
        --primary-shadow: rgba(102, 126, 234, 0.35);
        --footer-bg: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
    .invoice-header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
    .info-card { border-right: 4px solid #667eea; }
    .items-table thead th { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
    .total-row.grand { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
    .btn-print { background: linear-gradient(135deg, #10b981 0%, #059669 100%); }
    .btn-close { background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); }
    .invoice-footer { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
    .payment-section { border-top: 2px solid #667eea; }
</style>

{# Classic Template #}
{% elif template == 'classic' %}
<style>
    :root {
        --primary-color: #28a745;
        --primary-dark: #20c997;
        --primary-shadow: rgba(40, 167, 69, 0.35);
        --footer-bg: linear-gradient(135deg, #28a745 0%, #20c997 100%);
    }
    body { background: linear-gradient(135deg, #28a745 0%, #20c997 100%); }
    .invoice-header { background: linear-gradient(135deg, #28a745 0%, #20c997 100%); }
    .info-card { border-right: 4px solid #28a745; background: #f8f9fa; }
    .items-table thead th { background: linear-gradient(135deg, #28a745 0%, #20c997 100%); }
    .total-row.grand { background: linear-gradient(135deg, #28a745 0%, #20c997 100%); }
    .btn-print { background: linear-gradient(135deg, #10b981 0%, #059669 100%); }
    .btn-close { background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); }
    .invoice-container { border-radius: 8px; }
    .invoice-footer { background: linear-gradient(135deg, #28a745 0%, #20c997 100%); }
    .payment-section { border-top: 2px solid #28a745; }
</style>

{# Minimal Template #}
{% elif template == 'minimal' %}
<style>
    :root {
        --primary-color: #17a2b8;
        --primary-dark: #138496;
        --primary-shadow: rgba(23, 162, 184, 0.35);
        --footer-bg: #17a2b8;
    }
    body { background: #f5f5f5; }
    .invoice-header { background: #17a2b8; padding: 15px 30px; }
    .invoice-container { border-radius: 0; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    .info-card { border-right: 2px solid #17a2b8; background: white; box-shadow: none; border: 1px solid #dee2e6; }
    .items-table thead th { background: #17a2b8; }
    .total-row.grand { background: #17a2b8; }
    .btn-print { background: linear-gradient(135deg, #10b981 0%, #059669 100%); }
    .btn-close { background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); }
    .invoice-footer { background: #17a2b8; }
    .payment-section { border-top: 2px solid #17a2b8; }
</style>

{# Elegant Template #}
{% elif template == 'elegant' %}
<style>
    :root {
        --primary-color: #f5576c;
        --primary-dark: #f093fb;
        --primary-shadow: rgba(245, 87, 108, 0.35);
        --footer-bg: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    }
    body { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
    .invoice-header { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); position: relative; overflow: hidden; }
    .invoice-header::before { content: ''; position: absolute; top: -50%; right: -10%; width: 400px; height: 400px; background: rgba(255,255,255,0.1); border-radius: 50%; }
    .info-card { border-right: 4px solid #f5576c; background: linear-gradient(to bottom, #fff 0%, #fff5f7 100%); }
    .items-table thead th { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
    .total-row.grand { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
    .btn-print { background: linear-gradient(135deg, #10b981 0%, #059669 100%); }
    .btn-close { background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); }
    .invoice-container { border-radius: 20px; }
    .invoice-footer { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
    .payment-section { border-top: 2px solid #f5576c; }
</style>

{# Dark Template - داكن #}
{% elif template == 'dark' %}
<style>
    :root {
        --primary-color: #e94560;
        --primary-dark: #533483;
        --primary-shadow: rgba(233, 69, 96, 0.35);
        --footer-bg: #151525;
    }
    body { background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); }
    .invoice-container { background: #1e1e2e; border-radius: 16px; box-shadow: 0 20px 60px rgba(0,0,0,0.6); }
    .invoice-header { background: linear-gradient(135deg, #0f3460 0%, #533483 100%); position: relative; overflow: hidden; }
    .invoice-header::after { content: ''; position: absolute; bottom: -40px; left: -40px; width: 200px; height: 200px; background: rgba(255,255,255,0.05); border-radius: 50%; }
    .info-card { border-right: 4px solid #e94560; background: #2a2a3e; color: #e0e0e0; box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
    .info-card h6, .info-card strong { color: #a78bfa; }
    .info-card p, .info-card span { color: #cbd5e1; }
    .items-table thead th { background: linear-gradient(135deg, #0f3460 0%, #533483 100%); color: #fff; }
    .items-table tbody tr { color: #e0e0e0; }
    .items-table tbody tr:nth-child(even) { background: #252535; }
    .items-table tbody tr:nth-child(odd) { background: #1e1e2e; }
    .total-row { color: #cbd5e1; background: #252535; }
    .total-row.grand { background: linear-gradient(135deg, #e94560 0%, #533483 100%); color: #fff; font-weight: bold; }
    .totals-section, .payment-section { background: #1e1e2e; }
    .payment-section { border-top: 2px solid #e94560; }
    .invoice-footer { background: #151525; color: #94a3b8; }
    .invoice-info { background: #1e1e2e; }
    .btn-print { background: linear-gradient(135deg, #10b981 0%, #059669 100%); }
    .btn-close { background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); }
    h6, strong, label { color: #a78bfa !important; }
    p, span, td { color: #cbd5e1; }
    .items-table tbody td:last-child { color: #e94560; }
</style>

{# Ocean Template - محيطي #}
{% elif template == 'ocean' %}
<style>
    :root {
        --primary-color: #0077b6;
        --primary-dark: #03045e;
        --primary-shadow: rgba(0, 119, 182, 0.35);
        --footer-bg: linear-gradient(135deg, #03045e 0%, #0077b6 100%);
    }
    body { background: linear-gradient(135deg, #0077b6 0%, #00b4d8 100%); }
    .invoice-container { border-radius: 16px; box-shadow: 0 20px 60px rgba(0, 119, 182, 0.4); }
    .invoice-header { background: linear-gradient(135deg, #03045e 0%, #0077b6 100%); position: relative; overflow: hidden; }
    .invoice-header::before { content: ''; position: absolute; top: -30px; left: -30px; width: 300px; height: 300px; background: rgba(0, 180, 216, 0.15); border-radius: 50%; }
    .info-card { border-right: 4px solid #0077b6; background: linear-gradient(to bottom, #fff 0%, #e0f7ff 100%); }
    .items-table thead th { background: linear-gradient(135deg, #03045e 0%, #0077b6 100%); }
    .total-row.grand { background: linear-gradient(135deg, #03045e 0%, #0077b6 100%); }
    .invoice-footer { background: linear-gradient(135deg, #03045e 0%, #0077b6 100%); }
    .payment-section { border-top: 2px solid #0077b6; }
    .items-table tbody td:last-child { color: #0077b6; }
    .btn-print { background: linear-gradient(135deg, #10b981 0%, #059669 100%); }
    .btn-close { background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); }
</style>

{# Sunset Template - غروب #}
{% elif template == 'sunset' %}
<style>
    :root {
        --primary-color: #f77f00;
        --primary-dark: #d62828;
        --primary-shadow: rgba(247, 127, 0, 0.35);
        --footer-bg: linear-gradient(135deg, #d62828 0%, #f77f00 100%);
    }
    body { background: linear-gradient(135deg, #f77f00 0%, #fcbf49 100%); }
    .invoice-container { border-radius: 16px; box-shadow: 0 20px 60px rgba(247, 127, 0, 0.35); }
    .invoice-header { background: linear-gradient(135deg, #d62828 0%, #f77f00 100%); position: relative; overflow: hidden; }
    .invoice-header::before { content: ''; position: absolute; bottom: -50px; right: -50px; width: 250px; height: 250px; background: rgba(255,255,255,0.08); border-radius: 50%; }
    .info-card { border-right: 4px solid #f77f00; background: linear-gradient(to bottom, #fff 0%, #fff8f0 100%); }
    .items-table thead th { background: linear-gradient(135deg, #d62828 0%, #f77f00 100%); }
    .total-row.grand { background: linear-gradient(135deg, #d62828 0%, #f77f00 100%); }
    .invoice-footer { background: linear-gradient(135deg, #d62828 0%, #f77f00 100%); }
    .payment-section { border-top: 2px solid #f77f00; }
    .items-table tbody td:last-child { color: #d62828; }
    .btn-print { background: linear-gradient(135deg, #10b981 0%, #059669 100%); }
    .btn-close { background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%); }
</style>

{# Corporate Template - مؤسسي #}
{% elif template == 'corporate' %}
<style>
    :root {
        --primary-color: #1e3a5f;
        --primary-dark: #1b4332;
        --primary-shadow: rgba(30, 58, 95, 0.35);
        --footer-bg: linear-gradient(135deg, #1e3a5f 0%, #1b4332 100%);
    }
    body { background: linear-gradient(135deg, #1e3a5f 0%, #2d6a4f 100%); }
    .invoice-container { border-radius: 8px; box-shadow: 0 10px 40px rgba(0,0,0,0.3); border-top: 6px solid #1e3a5f; }
    .invoice-header { background: linear-gradient(135deg, #1e3a5f 0%, #1b4332 100%); }
    .info-card { border-right: 4px solid #1e3a5f; background: #f8fafc; border-radius: 6px; }
    .items-table thead th { background: linear-gradient(135deg, #1e3a5f 0%, #1b4332 100%); letter-spacing: 0.5px; }
    .items-table tbody tr:nth-child(even) { background: #f0f4f8; }
    .total-row.grand { background: linear-gradient(135deg, #1e3a5f 0%, #1b4332 100%); }
    .invoice-footer { background: linear-gradient(135deg, #1e3a5f 0%, #1b4332 100%); }
    .payment-section { border-top: 2px solid #1e3a5f; }
    .items-table tbody td:last-child { color: #1e3a5f; }
    .btn-print { background: linear-gradient(135deg, #10b981 0%, #059669 100%); }
    .btn-close { background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); }
</style>
{% endif %}

