# ุฅุถุงูุฉ ุฎุงูุฉ ุฅุถุงูุฉ ุนููู ุฌุฏูุฏ ูู ููุทุฉ ุงูุจูุน
# Add New Customer Feature to POS

## ๐ฏ ุงููุทููุจ | Requirements

ุฅุถุงูุฉ ุฅููุงููุฉ ุฅุถุงูุฉ ุนููู ุฌุฏูุฏ ูุจุงุดุฑุฉ ูู ุดุงุดุฉ ููุทุฉ ุงูุจูุน ุฏูู ุงูุญุงุฌุฉ ููุฎุฑูุฌ ูู ุงูุดุงุดุฉ.

---

## โ ุงูุชุบููุฑุงุช ุงูููุฌุฒุฉ | Changes Made

### **1. ุฅุถุงูุฉ ุฒุฑ "ุฅุถุงูุฉ ุนููู" ุจุฌุงูุจ ูุงุฆูุฉ ุงูุนููุงุก**

**ุงูููู:** `app/templates/pos/index.html` - ุงูุณุทูุฑ 555-571

ุชู ุชุญููู ุญูู ุงุฎุชูุงุฑ ุงูุนููู ุฅูู `input-group` ูุน ุฒุฑ ุฅุถุงูุฉ:

**ููุงุญุธุฉ:** ุชู ุชุฑุฌูุฉ ุฌููุน ุงููุตูุต ุฅูู ุงูุฅูุฌููุฒูุฉ

```html
<div class="input-group">
    <select class="form-select" id="customer-select">
        <option value="">{{ _('Walk-in Customer') }}</option>
        {% for customer in customers %}
        <option value="{{ customer.id }}">{{ customer.name }} - {{ customer.phone }}</option>
        {% endfor %}
    </select>
    <button class="btn btn-primary" type="button" data-bs-toggle="modal" data-bs-target="#addCustomerModal" title="ุฅุถุงูุฉ ุนููู ุฌุฏูุฏ">
        <i class="fas fa-plus"></i>
    </button>
</div>
```

**ุงููููุฒุงุช:**
- โ ุฒุฑ ุฃุฒุฑู ุจุฃููููุฉ `+` ุจุฌุงูุจ ูุงุฆูุฉ ุงูุนููุงุก
- โ ููุชุญ ูุงูุฐุฉ ููุจุซูุฉ (Modal) ูุฅุถุงูุฉ ุนููู ุฌุฏูุฏ
- โ ุชุตููู ูุชูุงุณู ูุน ูุงุฌูุฉ ููุทุฉ ุงูุจูุน

---

### **2. ุฅุถุงูุฉ ูุงูุฐุฉ ููุจุซูุฉ (Modal) ูุฅุถุงูุฉ ุงูุนููู**

**ุงูููู:** `app/templates/pos/index.html` - ุงูุณุทูุฑ 1235-1339

ุชู ุฅุถุงูุฉ Modal ูุงูู ูุญุชูู ุนูู ูููุฐุฌ ุฅุถุงูุฉ ุนููู:

**ุงูุญููู ุงููุชููุฑุฉ:**
- โ **ุงูุงุณู** (ุฅุฌุจุงุฑู)
- โ **ุงูุงุณู ุจุงูุฅูุฌููุฒูุฉ** (ุงุฎุชูุงุฑู)
- โ **ุฑูู ุงูุฌูุงู** (ุฅุฌุจุงุฑู)
- โ **ุฑูู ุงููุงุชู** (ุงุฎุชูุงุฑู)
- โ **ุงูุจุฑูุฏ ุงูุฅููุชุฑููู** (ุงุฎุชูุงุฑู)
- โ **ููุน ุงูุนููู** (ูุฑุฏ/ุดุฑูุฉ)
- โ **ุงูุนููุงู** (ุงุฎุชูุงุฑู)
- โ **ุงููุฏููุฉ** (ุงุฎุชูุงุฑู)
- โ **ุงูุฏููุฉ** (ุงุฎุชูุงุฑู)
- โ **ุงูุฑูู ุงูุถุฑูุจู** (ุงุฎุชูุงุฑู)
- โ **ุงููุฆุฉ** (VIP/ุนุงุฏู/ุฌููุฉ)

**ุงูุชุตููู:**
- โ ุฑุฃุณ ุฃุฒุฑู ูุน ุฃููููุฉ
- โ ูููุฐุฌ ููุธู ูู ุตููู
- โ ุฃุฒุฑุงุฑ ุญูุธ ูุฅูุบุงุก

---

### **3. ุฅุถุงูุฉ ุฏุงูุฉ JavaScript ูุญูุธ ุงูุนููู**

**ุงูููู:** `app/templates/pos/index.html` - ุงูุณุทูุฑ 1199-1233

ุชู ุฅุถุงูุฉ ุฏุงูุฉ `addNewCustomer()` ุงูุชู:

```javascript
async function addNewCustomer() {
    const form = document.getElementById('addCustomerForm');
    const formData = new FormData(form);
    
    // ุฅุฑุณุงู ุงูุจูุงูุงุช ุนุจุฑ AJAX
    const response = await fetch('/sales/customers/add_ajax', {
        method: 'POST',
        body: formData
    });
    
    const result = await response.json();
    
    if (result.success) {
        // ุฅุถุงูุฉ ุงูุนููู ูููุงุฆูุฉ ุงูููุณุฏูุฉ
        const customerSelect = document.getElementById('customer-select');
        const option = document.createElement('option');
        option.value = result.customer.id;
        option.text = result.customer.name + ' - ' + formData.get('phone');
        option.selected = true;
        customerSelect.add(option);
        
        // ุฅุบูุงู ุงููุงูุฐุฉ ููุณุญ ุงููููุฐุฌ
        modal.hide();
        form.reset();
        
        alert('ุชู ุฅุถุงูุฉ ุงูุนููู ุจูุฌุงุญ!');
    }
}
```

**ุงููููุฒุงุช:**
- โ ุฅุฑุณุงู ุงูุจูุงูุงุช ุนุจุฑ AJAX ุฏูู ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ
- โ ุฅุถุงูุฉ ุงูุนููู ุงูุฌุฏูุฏ ุชููุงุฆูุงู ูููุงุฆูุฉ ุงูููุณุฏูุฉ
- โ ุงุฎุชูุงุฑ ุงูุนููู ุงูุฌุฏูุฏ ุชููุงุฆูุงู
- โ ุฅุบูุงู ุงููุงูุฐุฉ ููุณุญ ุงููููุฐุฌ ุจุนุฏ ุงููุฌุงุญ
- โ ุฑุณุงูุฉ ุชุฃููุฏ ูููุณุชุฎุฏู

---

### **4. ุงุณุชุฎุฏุงู Route ููุฌูุฏ ูุณุจูุงู**

**ุงูููู:** `app/sales/routes.py` - ุงูุณุทูุฑ 74-118

ุชู ุงุณุชุฎุฏุงู route ููุฌูุฏ ูุณุจูุงู `/sales/customers/add_ajax` ุงูุฐู:
- โ ูููุฏ ููุฏ ุงูุนููู ุชููุงุฆูุงู
- โ ูุญูุธ ุจูุงูุงุช ุงูุนููู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ูุฑุฌุน JSON ูุน ูุนูููุงุช ุงูุนููู ุงูุฌุฏูุฏ

---

## ๐ฏ ููููุฉ ุงูุงุณุชุฎุฏุงู | How to Use

### **ุงูุฎุทูุงุช:**

1. **ุงูุชุญ ููุทุฉ ุงูุจูุน:**
   ```
   ุงุฐูุจ ุฅูู: ููุทุฉ ุงูุจูุน
   ```

2. **ุงุถุบุท ุนูู ุฒุฑ "+" ุจุฌุงูุจ ูุงุฆูุฉ ุงูุนููุงุก:**
   - ุณุชุธูุฑ ูุงูุฐุฉ ููุจุซูุฉ ูุฅุถุงูุฉ ุนููู ุฌุฏูุฏ

3. **ุงููุฃ ุจูุงูุงุช ุงูุนููู:**
   - ุงูุงุณู (ุฅุฌุจุงุฑู)
   - ุฑูู ุงูุฌูุงู (ุฅุฌุจุงุฑู)
   - ุจุงูู ุงูุญููู ุงุฎุชูุงุฑูุฉ

4. **ุงุถุบุท "ุญูุธ ุงูุนููู":**
   - โ ุณูุชู ุญูุธ ุงูุนููู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
   - โ ุณูุธูุฑ ุงูุนููู ูู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ
   - โ ุณูุชู ุงุฎุชูุงุฑ ุงูุนููู ุชููุงุฆูุงู
   - โ ุณุชุบูู ุงููุงูุฐุฉ ุงูููุจุซูุฉ

5. **ุฃููู ุนูููุฉ ุงูุจูุน:**
   - ุงูุนููู ุงูุฌุฏูุฏ ุงูุขู ูุญุฏุฏ ูู ุงูุทูุจ
   - ููููู ุฅุถุงูุฉ ุงูููุชุฌุงุช ูุฅุชูุงู ุงูุจูุน

---

## ๐ ููุฎุต ุงููููุงุช ุงููุนุฏูุฉ | Modified Files

| ุงูููู | ุงูุชุบููุฑ | ุงูุณุทูุฑ |
|-------|---------|--------|
| **app/templates/pos/index.html** | ุฅุถุงูุฉ ุฒุฑ + ุจุฌุงูุจ ูุงุฆูุฉ ุงูุนููุงุก | 555-571 |
| **app/templates/pos/index.html** | ุฅุถุงูุฉ ุฏุงูุฉ JavaScript | 1199-1233 |
| **app/templates/pos/index.html** | ุฅุถุงูุฉ Modal ูููุฐุฌ ุงูุนููู | 1235-1339 |
| **app/sales/routes.py** | ุงุณุชุฎุฏุงู route ููุฌูุฏ | 74-118 |

---

## ๐ ุงูุตูุงุญูุงุช ุงููุทููุจุฉ | Required Permissions

ูุฅุถุงูุฉ ุนููู ุฌุฏูุฏุ ูุฌุจ ุฃู ูููู ูุฏู ุงููุณุชุฎุฏู ุงูุตูุงุญูุฉ:
```
customers.create
```

---

## โจ ุงููููุฒุงุช | Features

- โ **ุณุฑูุน:** ุฅุถุงูุฉ ุนููู ุฏูู ูุบุงุฏุฑุฉ ุดุงุดุฉ ููุทุฉ ุงูุจูุน
- โ **ุณูู:** ูููุฐุฌ ุจุณูุท ููุงุถุญ
- โ **ุชููุงุฆู:** ุงูุนููู ูุถุงู ูููุงุฆูุฉ ูููุฎุชุงุฑ ุชููุงุฆูุงู
- โ **ุขูู:** ูุณุชุฎุฏู AJAX ูุน ุงูุชุญูู ูู ุงูุตูุงุญูุงุช
- โ **ูุชูุงุณู:** ุชุตููู ูุชูุงุดู ูุน ูุงุฌูุฉ ููุทุฉ ุงูุจูุน

---

**ุชุงุฑูุฎ ุงูุฅุถุงูุฉ:** 2026-02-14
**ุงูุญุงูุฉ:** โ ุชู ุจูุฌุงุญ

